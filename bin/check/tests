#!/usr/bin/env sh

# Do not modify this file - this file is created by bin/wrapper/dist-sync and will be overriden every time dist-sync is invoked.
# see https://gitlab.brainbits.net/docker/dist/-/blob/master/README.md

. "$(dirname $0)/../config"

cmd=$*
if [ $# -eq 0 ]; then
    cmd=""

    if [ -n "${TESTS_REPORT_FILE}" ]; then
        printf "${warning}Setting log-junit via ${warning_name}TESTS_REPORT_FILE${warning} is now deprecated. Use ${warning_name}TESTS_JUNIT_FILE${warning} instead.${reset}\n"
        mkdir -p "$(dirname ${TESTS_REPORT_FILE})"
        cmd=" ${cmd} --log-junit=${TESTS_REPORT_FILE}"
    fi

    if [ -n "${TESTS_JUNIT_FILE}" ]; then
        mkdir -p "$(dirname ${TESTS_JUNIT_FILE})"
        cmd="${cmd} --log-junit=${TESTS_JUNIT_FILE}"
    fi
fi

printf "${check}>>> running ${check_name}tests${check} check on ${check_name}%s${reset}\n" "${NAME}"

"$(wrapper phpunit ${PHPUNIT_CMD:-phpunit})" ${cmd}
