#!/usr/bin/env sh

# Do not modify this file - this file is created by bin/wrapper/dist-sync and will be overriden every time dist-sync is invoked.
# see https://gitlab.brainbits.net/docker/dist/-/blob/master/README.md

. "$(dirname $0)/../config"

findDirs=${TSFINDER_DIRS:="."}
excludesFile=${TSFINDER_EXCLUDES_FILE:=".tsfinder-excludes"}

printf "${check}>>> running ${check_name}tsfinder${check} check on ${check_name}%s${reset}\n" "${NAME}"

cmd=$*
if [ $# -eq 0 ]; then
    cmd=""
    if [ -f "$excludesFile" ]; then
      cmd="${cmd} -e $excludesFile"
    fi
    cmd="${cmd} ${findDirs}"

    if [ ! -f "$excludesFile" ]; then
        printf "${warning}Excludes file %s not found!${reset}\n" $excludesFile
        printf "${warning}Create it and add files to be excluded, one path per line.${reset}\n"
        printf "${warning}You might want to add folders like .git, which will most certainly have matches.${reset}\n"
    fi
fi

"${BIN_DIR}/wrapper/tsfinder" ${cmd}
